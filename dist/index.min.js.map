{"version":3,"file":"index.min.js","sources":["../src/init/bindEvents.js","../src/init/mixin.js","../src/init/watch.js","../src/init/extend.js","../src/init/index.js","../src/events.js","../src/setter.js","../src/getter.js","../src/selector.js","../src/index.js"],"sourcesContent":["export default function (events) {\n  for (let e in events) {\n    let arr = e.split('->')\n    let handlers = events[e].split(' ')\n    let i = 0\n    let len = handlers.length\n    for (; i < len; i++) {\n      let handler = this[handlers[i]]\n      if (handler) {\n        if (arr[1]) {\n          this.$el.on(arr[0], arr[1], (event) => handler.call(this, event))\n        } else {\n          this.$el.on(arr[0], (event) => handler.call(this, event))\n        }\n      }\n    }\n  }\n}","export default function (methods) {\n  Object.assign(this, methods)\n}","export default function (watch) {\n  for (let name in watch) {\n    this.on('change:' + name, watch[name])\n  }\n}","export default function (defaultOptions = {}, options = {}) {\n  return $.extend(true, {\n    tagName: 'div',\n    data: {},\n    events: {},\n    methods: {},\n    watch: {},\n    init() {},\n    inited() {}\n  }, defaultOptions, options)\n}","import bindEvents from './bindEvents'\nimport initMixin from './mixin'\nimport initWatch from './watch'\nimport extend from './extend'\n\nlet uid = 0\n\nexport default function (Vir) {\n  Vir.prototype._init = function (defaultOptions, options) {\n    let {\n      el,\n      tagName,\n      data,\n      events,\n      methods,\n      watch,\n      init,\n      inited\n    } = extend(defaultOptions, options)\n\n    this._uid = ++uid\n    this.$el = el ? $(el) : $('<' + tagName + '>')\n    this.data = data\n    this._events = {}\n    this._cache = {}\n\n    initMixin.call(this, methods)\n    initWatch.call(this, watch)\n    bindEvents.call(this, events)\n    init.call(this)\n    inited.call(this)\n  }\n}","export default function (Vir) {\n  Vir.prototype.getEventListeners = function (type) {\n    if (type === void 0) {\n      return this._events\n    }\n    let t = type.toLowerCase()\n    return this._events[t] || (this._events[t] = [])\n  }\n\n  Vir.prototype.on = function (type, handler) {\n    this.getEventListeners(type).push(handler)\n    return () => {\n      this.off(type, handler)\n    }\n  }\n\n  Vir.prototype.once = function (type, handler) {\n    handler._once = true\n    this.on(type, handler)\n  }\n\n  Vir.prototype.off = function (type, handler) {\n    let queue = this.getEventListeners(type)\n    if (handler == void 0) {\n      queue.length = 0\n      return\n    }\n    let i = queue.length\n    for (; i--;) {\n      if (queue[i] == handler) {\n        break\n      }\n    }\n\n    if (~i) {\n      queue.splice(i, 1)\n    }\n\n  }\n\n  Vir.prototype.emit = function (type, args, ctx) {\n    let queue = this.getEventListeners(type)\n    if (type != '*') {\n      queue = queue.concat(this.getEventListeners('*'))\n    }\n    let i = 0\n    let len = queue.length\n    for (; i < len; i++) {\n      let handler = queue[i]\n      handler.call(ctx, args)\n      if (handler._once) {\n        i--\n        len--\n        this.off(type, handler)\n      }\n    }\n  }\n}","export default function (Vir) {\n  Vir.prototype.set = function (name, value, options) {\n    if (typeof name == 'object') {\n      let i\n      for (i in name) {\n        this.set(i, name[i], value)\n      }\n    } else {\n\n      options || (options = {})\n\n      let old = this.get(name)\n\n      this.data[name] = value\n\n      if (!options.force && old === value) {\n        return\n      }\n\n      if (options.silent) {\n        return\n      }\n\n      this.emit('change:' + name, {\n        old: old,\n        value: value,\n        type: name\n      }, this)\n    }\n  }\n}","export default function (Vir) {\n  Vir.prototype.get = function (name) {\n    return this.data[name]\n  }\n}","export default function (Vir) {\n  Vir.prototype.$$ = function (selector, cache) {\n\n    let _cache = this._cache\n\n    let _selector = this._uid + '_' + this.$el.selector + ' ' + selector\n\n    if (cache === false) {\n      _cache[_selector] = null\n    }\n\n    let $el = _cache[_selector]\n    if ($el) {\n      return $el\n    }\n    $el = this.$el.find(selector)\n    _cache[_selector] = $el\n    return $el\n  }\n}","import init from './init/index'\nimport initEvents from './events'\nimport initSetter from './setter'\nimport initGetter from './getter'\nimport initSelector from './selector'\n\nexport default function (defaultOptions) {\n  function Vir(options) {\n    if (!this instanceof Vir) {\n      return new Vir(options)\n    }\n\n    this._init(defaultOptions, options)\n  }\n\n  init(Vir)\n  initEvents(Vir)\n  initSetter(Vir)\n  initGetter(Vir)\n  initSelector(Vir)\n\n  return Vir\n}"],"names":["events","e","arr","split","handlers","i","len","length","handler","_this","$el","on","event","call","methods","this","watch","name","defaultOptions","options","$","extend","uid","Vir","prototype","_init","el","tagName","data","init","inited","_uid","_events","_cache","getEventListeners","type","t","toLowerCase","push","off","once","_once","queue","splice","emit","args","ctx","concat","set","value","old","get","force","silent","$$","selector","cache","_selector","find"],"mappings":"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"}