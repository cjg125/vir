{"version":3,"file":"index.min.js","sources":["../src/init/watch.js","../src/init/extend.js","../src/init/mixin.js","../src/init/bindEvents.js","../src/init/index.js","../src/events.js","../src/setter.js","../src/getter.js","../src/selector.js","../src/index.js"],"sourcesContent":["export default function handler(watch) {\n  for (let name in watch) {\n    if (typeof watch[name] === 'function') {\n      this.on(name, watch[name])\n    } else {\n      let watchs = watch[name]\n      let i = 0;\n      let len = watchs.length\n      let options = {}\n      for (; i < len; i++) {\n        options[name] = watchs[i]\n        handler.call(this, options)\n      }\n    }\n  }\n}","export default function (defaultOptions = {}, options = {}) {\n  return $.extend(true, {\n    tagName: 'div',\n    data: {},\n    events: {},\n    methods: {},\n    watch: {},\n    beforeInit() {},\n    init() {},\n    inited() {}\n  }, defaultOptions, options)\n}","export default function (methods) {\n  Object.assign(this, methods)\n}","export default function (events) {\n\n  function bindEvent(...args) {\n    let handler = args.pop()\n    if (typeof handler === 'function') {\n      handler = [handler]\n    } else {\n      handler = handler.split(' ')\n    }\n    for (let i = 0, len = handler.length; i < len; i++) {\n      let callback = handler[i]\n      if (typeof callback !== 'function') {\n        callback = this[callback]\n      }\n      this.$el.on.apply(this.$el, args.concat((event) => callback.call(this, event)))\n    }\n  }\n\n  for (let type in events) {\n    bindEvent.apply(this, type.split('->').concat(events[type]))\n  }\n}","import extend from './extend'\nimport initMixin from './mixin'\nimport initWatch from './watch'\nimport initBindEvents from './bindEvents'\n\nlet uid = 0\n\nexport default function (Vir) {\n  Vir.prototype._init = function (defaultOptions, options) {\n    let {\n      el,\n      tagName,\n      data,\n      events,\n      methods,\n      watch,\n      beforeInit,\n      init,\n      inited\n    } = extend(defaultOptions, options)\n\n    this._uid = ++uid\n    this.$el = el ? $(el) : $('<' + tagName + '>')\n    this.data = data\n    this._events = {}\n    this._cache = {}\n\n    beforeInit.call(this)\n    initMixin.call(this, methods)\n    initWatch.call(this, watch)\n    initBindEvents.call(this, events)\n    init.call(this)\n    inited.call(this)\n  }\n}","export default function (Vir) {\n  Vir.prototype.getEventListeners = function (type) {\n    if (type === void 0) {\n      return this._events\n    }\n    let t = type.toLowerCase()\n    return this._events[t] || (this._events[t] = [])\n  }\n\n  Vir.prototype.on = function (type, handler) {\n    this.getEventListeners(type).push(handler)\n    return () => {\n      this.off(type, handler)\n    }\n  }\n\n  Vir.prototype.once = function (type, handler) {\n    handler._once = true\n    this.on(type, handler)\n  }\n\n  Vir.prototype.off = function (type, handler) {\n    let queue = this.getEventListeners(type)\n    if (handler == void 0) {\n      queue.length = 0\n      return\n    }\n    let i = queue.length\n    for (; i--;) {\n      if (queue[i] == handler) {\n        break\n      }\n    }\n\n    if (~i) {\n      queue.splice(i, 1)\n    }\n\n  }\n\n  Vir.prototype.emit = function (type, args, ctx) {\n    let queue = this.getEventListeners(type)\n    if (type != '*') {\n      queue = queue.concat(this.getEventListeners('*'))\n    }\n    let i = 0\n    let len = queue.length\n    for (; i < len; i++) {\n      let handler = queue[i]\n      handler.call(ctx, args)\n      if (handler._once) {\n        i--\n        len--\n        this.off(type, handler)\n      }\n    }\n  }\n}","export default function (Vir) {\n  Vir.prototype.set = function (name, value, options = {}) {\n    if (typeof name == 'object') {\n      let i\n      for (i in name) {\n        this.set(i, name[i], value)\n      }\n    } else {\n\n      let old = this.get(name)\n\n      this.data[name] = value\n\n      if (!options.force && old === value) {\n        return\n      }\n\n      if (options.silent) {\n        return\n      }\n\n      this.emit(name, {\n        old: old,\n        value: value,\n        type: name\n      }, this)\n    }\n  }\n}","export default function (Vir) {\n  Vir.prototype.get = function (name) {\n    return this.data[name]\n  }\n}","export default function (Vir) {\n  Vir.prototype.$$ = function (selector, cache) {\n\n    let _cache = this._cache\n\n    let _selector = selector.replace(/\\s/g, '')\n\n    if (cache === false) {\n      _cache[_selector] = null\n    }\n\n    let $el = _cache[_selector]\n    if ($el) {\n      return $el\n    }\n    $el = this.$el.find(selector)\n    _cache[_selector] = $el\n    return $el\n  }\n}","import init from './init/index'\nimport initEvents from './events'\nimport initSetter from './setter'\nimport initGetter from './getter'\nimport initSelector from './selector'\n\nexport default function (defaultOptions) {\n  function Vir(options) {\n    if (!this instanceof Vir) {\n      return new Vir(options)\n    }\n\n    this._init(defaultOptions, options)\n  }\n\n  init(Vir)\n  initEvents(Vir)\n  initSetter(Vir)\n  initGetter(Vir)\n  initSelector(Vir)\n\n  return Vir\n}"],"names":["handler","watch","name","on","watchs","i","len","length","options","call","this","defaultOptions","$","extend","methods","events","bindEvent","args","pop","split","callback","_this","$el","apply","concat","event","type","uid","Vir","prototype","_init","el","tagName","data","beforeInit","init","inited","_uid","_events","_cache","getEventListeners","t","toLowerCase","push","off","once","_once","queue","splice","emit","ctx","set","value","old","get","force","silent","$$","selector","cache","_selector","replace","find"],"mappings":"8KAAe,SAASA,GAAQC,OACzB,GAAIC,KAAQD,MACY,kBAAhBA,GAAMC,QACVC,GAAGD,EAAMD,EAAMC,gBAEhBE,GAASH,EAAMC,GACfG,EAAI,EACJC,EAAMF,EAAOG,OACbC,KACGH,EAAIC,EAAKD,MACNH,GAAQE,EAAOC,KACfI,KAAKC,KAAMF,GCX3B,MAAe,cAAUG,gEAAqBH,qEACrCI,GAAEC,QAAO,WACL,2GAQRF,EAAgBH,sXCVN,SAAUM,KACTJ,KAAMI,MCDP,SAAUC,WAEdC,uCAAaC,4CAChBjB,GAAUiB,EAAKC,QACI,kBAAZlB,IACEA,GAEDA,EAAQmB,MAAM,SAErB,GAAId,GAAI,EAAGC,EAAMN,EAAQO,OAAQF,EAAIC,EAAKD,cAAtCA,EAAOC,MACVc,GAAWpB,EAAQK,EACC,mBAAbe,OACEC,EAAKD,MAEbE,IAAInB,GAAGoB,MAAMF,EAAKC,IAAKL,EAAKO,OAAO,SAACC,SAAUL,GAASX,OAAWgB,OALhEpB,OASN,GAAIqB,KAAQX,KACLQ,MAAMb,KAAMgB,EAAKP,MAAM,MAAMK,OAAOT,EAAOW,MCdrDC,EAAM,IAEK,SAAUC,KACnBC,UAAUC,MAAQ,SAAUnB,EAAgBH,SAW1CK,EAAOF,EAAgBH,GATzBuB,IAAAA,GACAC,IAAAA,QACAC,IAAAA,KACAlB,IAAAA,OACAD,IAAAA,QACAb,IAAAA,MACAiC,IAAAA,WACAC,IAAAA,KACAC,IAAAA,YAGGC,OAASV,OACTL,IAAMS,EAAKnB,EAAEmB,GAAMnB,EAAE,IAAMoB,EAAU,UACrCC,KAAOA,OACPK,gBACAC,YAEM9B,KAAKC,QACND,KAAKC,KAAMI,KACXL,KAAKC,KAAMT,KACNQ,KAAKC,KAAMK,KACrBN,KAAKC,QACHD,KAAKC,UChCD,SAAUkB,KACnBC,UAAUW,kBAAoB,SAAUd,MAC7B,SAATA,QACKhB,MAAK4B,WAEVG,GAAIf,EAAKgB,oBACNhC,MAAK4B,QAAQG,KAAO/B,KAAK4B,QAAQG,UAGtCZ,UAAU1B,GAAK,SAAUuB,EAAM1B,0BAC5BwC,kBAAkBd,GAAMiB,KAAK3C,GAC3B,aACA4C,IAAIlB,EAAM1B,OAIf6B,UAAUgB,KAAO,SAAUnB,EAAM1B,KAC3B8C,OAAQ,OACX3C,GAAGuB,EAAM1B,MAGZ6B,UAAUe,IAAM,SAAUlB,EAAM1B,MAC9B+C,GAAQrC,KAAK8B,kBAAkBd,MACpB,QAAX1B,gBACIO,OAAS,UAGbF,GAAI0C,EAAMxC,OACPF,KACD0C,EAAM1C,IAAML,KAKbK,KACG2C,OAAO3C,EAAG,MAKhBwB,UAAUoB,KAAO,SAAUvB,EAAMT,EAAMiC,MACrCH,GAAQrC,KAAK8B,kBAAkBd,EACvB,MAARA,MACMqB,EAAMvB,OAAOd,KAAK8B,kBAAkB,cAE1CnC,GAAI,EACJC,EAAMyC,EAAMxC,OACTF,EAAIC,EAAKD,IAAK,IACfL,GAAU+C,EAAM1C,KACZI,KAAKyC,EAAKjC,GACdjB,EAAQ8C,qBAGLF,IAAIlB,EAAM1B,SCrDR,SAAU4B,KACnBC,UAAUsB,IAAM,SAAUjD,EAAMkD,MAAO5C,mEACtB,oBAARN,gBAAAA,IAAkB,IACvBG,cACCA,IAAKH,QACHiD,IAAI9C,EAAGH,EAAKG,GAAI+C,OAElB,IAEDC,GAAM3C,KAAK4C,IAAIpD,WAEd+B,KAAK/B,GAAQkD,GAEb5C,EAAQ+C,OAASF,IAAQD,YAI1B5C,EAAQgD,mBAIPP,KAAK/C,OACHmD,QACED,OACDlD,GACLQ,WCzBM,SAAUkB,KACnBC,UAAUyB,IAAM,SAAUpD,SACrBQ,MAAKuB,KAAK/B,OCFN,SAAU0B,KACnBC,UAAU4B,GAAK,SAAUC,EAAUC,MAEjCpB,GAAS7B,KAAK6B,OAEdqB,EAAYF,EAASG,QAAQ,MAAO,GAEpCF,MAAU,MACLC,GAAa,SAGlBtC,GAAMiB,EAAOqB,SACbtC,GACKA,KAEHZ,KAAKY,IAAIwC,KAAKJ,KACbE,GAAatC,EACbA,WCXI,UAAUX,WACdiB,GAAIpB,OACNE,eAAgBkB,SACZ,IAAIA,GAAIpB,QAGZsB,MAAMnB,EAAgBH,YAGxBoB,KACMA,KACAA,KACAA,KACEA,GAENA"}