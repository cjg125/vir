{"version":3,"file":"index.min.js","sources":["../src/lib/typeof.js","../src/init/watch.js","../src/lib/shim/array.js","../src/init/extend.js","../src/init/mixin.js","../src/init/bindEvents.js","../src/init/index.js","../src/events.js","../src/setter.js","../src/getter.js","../src/selector.js","../src/lib/shim/index.js","../src/index.js"],"sourcesContent":["const toString = Object.prototype.toString\n\nfunction type(val) {\n  return toString.call(val)\n}\n\nexport function isArray(val) {\n  return type(val) === '[object Array]'\n}\n\nexport function isObject(val) {\n  return type(val) === '[object Object]'\n}\n\nexport function isFunction(val) {\n  return type(val) === '[object Function]'\n}\n\nexport function isNumber(val) {\n  return type(val) === '[object Number]'\n}\n\nexport function isString(val) {\n  return type(val) === '[object String]'\n}\n\nexport function isBoolean(val) {\n  return type(val) === '[object Boolean]'\n}","import {\n  isFunction\n} from '../lib/typeof'\n\nexport default function handler(watch) {\n  for (let name in watch) {\n    if (isFunction(watch[name])) {\n      this.on(name, watch[name])\n    } else {\n      let watchs = watch[name]\n      let i = 0;\n      let len = watchs.length\n      let options = {}\n      for (; i < len; i++) {\n        options[name] = watchs[i]\n        handler.call(this, options)\n      }\n    }\n  }\n}","export function forEach(callback) {\n  for (let i = 0, len = this.length; i < len; i++) {\n    callback(this[i], i, this)\n  }\n}\n\nexport function indexOf(value, i = 0) {\n  let len = this.length\n  i = Math.max(i >= 0 ? i : len - Math.abs(i), 0)\n  for (; i < len; i++) {\n    if (this[i] === value) {\n      return i\n    }\n  }\n  return -1\n}","export default function (defaultOptions = {}, options = {}) {\n  return $.extend(true, {\n    tagName: 'div',\n    data: {},\n    events: {},\n    methods: {},\n    watch: {},\n    beforeInit() {},\n    init() {},\n    inited() {}\n  }, defaultOptions, options)\n}","export default function (methods) {\n  Object.assign(this, methods)\n}","import {\n  isFunction\n} from '../lib/typeof'\n\nexport default function (events) {\n\n  function bindEvent(...args) {\n    let handler = args.pop()\n    if (isFunction(handler)) {\n      handler = [handler]\n    } else {\n      handler = handler.split(' ')\n    }\n    for (let i = 0, len = handler.length; i < len; i++) {\n      let callback = handler[i]\n      if (!isFunction(callback)) {\n        callback = this[callback]\n      }\n      this.$el.on.apply(this.$el, args.concat((event) => callback.call(this, event)))\n    }\n  }\n\n  for (let type in events) {\n    bindEvent.apply(this, type.split('->').concat(events[type]))\n  }\n}","import extend from './extend'\nimport initMixin from './mixin'\nimport initWatch from './watch'\nimport initBindEvents from './bindEvents'\n\nlet uid = 0\n\nexport default function (Vir) {\n  Vir.prototype._init = function (defaultOptions, options) {\n    let {\n      el,\n      tagName,\n      data,\n      events,\n      methods,\n      watch,\n      beforeInit,\n      init,\n      inited\n    } = extend(defaultOptions, options)\n\n    this._uid = ++uid\n    this.$el = el ? $(el) : $('<' + tagName + '>')\n    this.data = data\n    this._events = {}\n    this._cache = {}\n\n    beforeInit.call(this)\n    initMixin.call(this, methods)\n    initWatch.call(this, watch)\n    initBindEvents.call(this, events)\n    init.call(this)\n    inited.call(this)\n  }\n}","export default function (Vir) {\n\n  function all(type) {\n    if (type === void 0) {\n      return this._events\n    }\n    let t = type.toLowerCase()\n    return this._events[t] || (this._events[t] = [])\n  }\n\n  Vir.prototype.getEventListeners = all\n\n  Vir.prototype.on = function (type, handler) {\n    // todo 过滤重复绑定问题\n    all.call(this, type).push(handler)\n    return () => {\n      this.off(type, handler)\n    }\n  }\n\n  Vir.prototype.once = function (type, handler) {\n    handler._once = true\n    this.on(type, handler)\n  }\n\n  Vir.prototype.off = function (type, handler) {\n    let queue = all.call(this, type)\n    if (handler == void 0) {\n      queue.length = 0\n      return\n    }\n\n    let i = queue.indexOf(handler)\n\n    if (~i) {\n      queue.splice(i, 1)\n    }\n\n  }\n\n  Vir.prototype.emit = function (type, args, ctx) {\n    let queue = all.call(this, type)\n    if (type != '*') {\n      queue = queue.concat(all.call(this, '*'))\n    }\n\n    queue.forEach((handler) => {\n      handler.call(ctx, args)\n      if (handler._once) {\n        this.off(type, handler)\n      }\n    })\n\n  }\n}","import {\n  isObject\n} from './lib/typeof'\n\nexport default function (Vir) {\n  Vir.prototype.set = function (name, value, options = {}) {\n    if (isObject(name)) {\n      for (let i in name) {\n        this.set(i, name[i], value)\n      }\n    } else {\n\n      let old = this.get(name)\n\n      this.data[name] = value\n\n      if (!options.force && old === value) {\n        return\n      }\n\n      if (options.silent) {\n        return\n      }\n\n      this.emit(name, {\n        old: old,\n        value: value,\n        type: name\n      }, this)\n    }\n  }\n}","export default function (Vir) {\n  Vir.prototype.get = function (name) {\n    return this.data[name]\n  }\n}","export default function (Vir) {\n  Vir.prototype.$$ = function (selector, cache) {\n\n    let _cache = this._cache\n\n    let _selector = selector.replace(/\\s/g, '')\n\n    if (cache === false) {\n      _cache[_selector] = null\n    }\n\n    let $el = _cache[_selector]\n    if ($el) {\n      return $el\n    }\n    $el = this.$el.find(selector)\n    _cache[_selector] = $el\n    return $el\n  }\n}","import * as array from './array'\n\nexport function forEach() {\n  if (!Array.prototype.forEach) {\n    Array.prototype.forEach = array.forEach\n  }\n}\n\nexport function indexOf() {\n  if (!Array.prototype.indexOf) {\n    Array.prototype.indexOf = array.indexOf\n  }\n}","import init from './init/index'\nimport initEvents from './events'\nimport initSetter from './setter'\nimport initGetter from './getter'\nimport initSelector from './selector'\n\nimport * as shim from './lib/shim/index'\n\nshim.forEach()\nshim.indexOf()\n\nexport default function (defaultOptions) {\n  function Vir(options) {\n    if (!this instanceof Vir) {\n      return new Vir(options)\n    }\n\n    this._init(defaultOptions, options)\n  }\n\n  init(Vir)\n  initEvents(Vir)\n  initSetter(Vir)\n  initGetter(Vir)\n  initSelector(Vir)\n\n  return Vir\n}"],"names":["type","val","toString","call","isObject","isFunction","handler","watch","name","on","watchs","i","len","length","options","this","forEach","callback","indexOf","value","Math","max","abs","defaultOptions","$","extend","methods","Object","prototype","events","bindEvent","args","pop","split","_this","$el","apply","concat","event","uid","Vir","_init","el","tagName","data","beforeInit","init","inited","_uid","_events","_cache","all","t","toLowerCase","getEventListeners","push","off","once","_once","queue","splice","emit","ctx","set","old","get","force","silent","$$","selector","cache","_selector","replace","find","Array","array"],"mappings":"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"}