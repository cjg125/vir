{"version":3,"file":"index.js","sources":["../src/init/bindEvents.js","../src/init/mixin.js","../src/init/watch.js","../src/init/extend.js","../src/init/index.js","../src/events.js","../src/setter.js","../src/getter.js","../src/selector.js","../src/index.js"],"sourcesContent":["export default function (events) {\n  for (let e in events) {\n    let arr = e.split('->')\n    let handlers = events[e].split(' ')\n    let i = 0\n    let len = handlers.length\n    for (; i < len; i++) {\n      let handler = this[handlers[i]]\n      if (handler) {\n        if (arr[1]) {\n          this.$el.on(arr[0], arr[1], (event) => handler.call(this, event))\n        } else {\n          this.$el.on(arr[0], (event) => handler.call(this, event))\n        }\n      }\n    }\n  }\n}","export default function (methods) {\n  Object.assign(this, methods)\n}","export default function (watch) {\n  for (let name in watch) {\n    this.on('change:' + name, watch[name])\n  }\n}","export default function (defaultOptions = {}, options = {}) {\n  return $.extend(true, {\n    tagName: 'div',\n    data: {},\n    events: {},\n    methods: {},\n    watch: {},\n    init() {},\n    inited() {}\n  }, defaultOptions, options)\n}","import bindEvents from './bindEvents'\nimport initMixin from './mixin'\nimport initWatch from './watch'\nimport extend from './extend'\n\nlet uid = 0\n\nexport default function (Vir) {\n  Vir.prototype._init = function (defaultOptions, options) {\n    let {\n      el,\n      tagName,\n      data,\n      events,\n      methods,\n      watch,\n      init,\n      inited\n    } = extend(defaultOptions, options)\n\n    this._uid = ++uid\n    this.$el = el ? $(el) : $('<' + tagName + '>')\n    this.data = data\n    this._events = {}\n    this._cache = {}\n\n    initMixin.call(this, methods)\n    initWatch.call(this, watch)\n    bindEvents.call(this, events)\n    init.call(this)\n    inited.call(this)\n  }\n}","export default function (Vir) {\n  Vir.prototype.getEventListeners = function (type) {\n    if (type === void 0) {\n      return this._events\n    }\n    let t = type.toLowerCase()\n    return this._events[t] || (this._events[t] = [])\n  }\n\n  Vir.prototype.on = function (type, handler) {\n    this.getEventListeners(type).push(handler)\n    return () => {\n      this.off(type, handler)\n    }\n  }\n\n  Vir.prototype.once = function (type, handler) {\n    handler._once = true\n    this.on(type, handler)\n  }\n\n  Vir.prototype.off = function (type, handler) {\n    let queue = this.getEventListeners(type)\n    if (handler == void 0) {\n      queue.length = 0\n      return\n    }\n    let i = queue.length\n    for (; i--;) {\n      if (queue[i] == handler) {\n        break\n      }\n    }\n\n    if (~i) {\n      queue.splice(i, 1)\n    }\n\n  }\n\n  Vir.prototype.emit = function (type, args, ctx) {\n    let queue = this.getEventListeners(type)\n    if (type != '*') {\n      queue = queue.concat(this.getEventListeners('*'))\n    }\n    let i = 0\n    let len = queue.length\n    for (; i < len; i++) {\n      let handler = queue[i]\n      handler.call(ctx, args)\n      if (handler._once) {\n        i--\n        len--\n        this.off(type, handler)\n      }\n    }\n  }\n}","export default function (Vir) {\n  Vir.prototype.set = function (name, value, options) {\n    if (typeof name == 'object') {\n      let i\n      for (i in name) {\n        this.set(i, name[i], value)\n      }\n    } else {\n\n      options || (options = {})\n\n      let old = this.get(name)\n\n      this.data[name] = value\n\n      if (!options.force && old === value) {\n        return\n      }\n\n      if (options.silent) {\n        return\n      }\n\n      this.emit('change:' + name, {\n        old: old,\n        value: value,\n        type: name\n      }, this)\n    }\n  }\n}","export default function (Vir) {\n  Vir.prototype.get = function (name) {\n    return this.data[name]\n  }\n}","export default function (Vir) {\n  Vir.prototype.$$ = function (selector, cache) {\n\n    let _cache = this._cache\n\n    let _selector = this._uid + '_' + this.$el.selector + ' ' + selector\n\n    if (cache === false) {\n      _cache[_selector] = null\n    }\n\n    let $el = _cache[_selector]\n    if ($el) {\n      return $el\n    }\n    $el = this.$el.find(selector)\n    _cache[_selector] = $el\n    return $el\n  }\n}","import init from './init/index'\nimport initEvents from './events'\nimport initSetter from './setter'\nimport initGetter from './getter'\nimport initSelector from './selector'\n\nexport default function (defaultOptions) {\n  function Vir(options) {\n    if (!this instanceof Vir) {\n      return new Vir(options)\n    }\n\n    this._init(defaultOptions, options)\n  }\n\n  init(Vir)\n  initEvents(Vir)\n  initSetter(Vir)\n  initGetter(Vir)\n  initSelector(Vir)\n\n  return Vir\n}"],"names":["events","e","arr","split","handlers","i","len","length","handler","$el","on","event","call","methods","watch","name","defaultOptions","options","$","extend","uid","Vir","prototype","_init","el","tagName","data","init","inited","_uid","_events","_cache","getEventListeners","type","t","toLowerCase","push","off","once","_once","queue","splice","emit","args","ctx","concat","set","value","old","get","force","silent","$$","selector","cache","_selector","find"],"mappings":"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"}